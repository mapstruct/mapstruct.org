<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Support for builders, mapper constructor injection and much more: MapStruct 1.3.0.Beta1 is out &ndash; MapStruct</title>
        <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="/css/uikit.gradient.min.css" />
        <link rel="stylesheet" href="/css/prettify.css" />
        <link rel="stylesheet" href="/css/font-awesome.css" />
        <link rel="stylesheet" href="/css/styles.css" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato" />
        <link rel="alternate" href="/news/index.xml" type="application/rss+xml" title="MapStruct" />
        <script src="/js/jquery-3.1.1.min.js"></script>
        <script src="/js/uikit.min.js"></script>
        <script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>

        
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-41136939-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    </head>

    <body>
        <nav class="uk-navbar uk-margin-large-bottom uk-navbar-attached">
            <a class="uk-navbar-brand ms-hidden-small ms-navbar-brand" href="/">MapStruct</a>
            <ul class="uk-navbar-nav ms-hidden-small">
            

    <li class="uk-active">
    <a href="/news/">News</a>
    </li>

    <li>
    <a href="/documentation/installation/">Documentation</a>
    </li>

    <li>
    <a href="/community/getting-help/">Community</a>
    </li>

    <li>
    <a href="/development/contributing/">Development</a>
    </li>

    <li>
    <a href="/faq/">FAQ</a>
    </li>

            </ul>
            <a href="#nav-small" class="ms-visible-small uk-navbar-toggle" data-uk-offcanvas="{mode:'slide'}"></a>
            <a class="uk-navbar-brand uk-navbar-center ms-visible-small ms-navbar-brand" href="/">MapStruct</a>
        </nav>

        <div id="nav-small" class="uk-offcanvas">
            <div class="uk-offcanvas-bar">
                <ul class="uk-nav uk-nav-offcanvas" data-uk-nav>
                

    <li class="uk-active">
    <a href="/news/">News</a>
    </li>

    <li>
    <a href="/documentation/installation/">Documentation</a>
    </li>

    <li>
    <a href="/community/getting-help/">Community</a>
    </li>

    <li>
    <a href="/development/contributing/">Development</a>
    </li>

    <li>
    <a href="/faq/">FAQ</a>
    </li>

                </ul>
            </div>
        </div>




<div class="uk-container uk-container-center uk-margin-top uk-margin-large-bottom">
    <div class="uk-grid">
        <div class="uk-width-medium-1-4">
            <div class="ms-aside">
            
    <ul class="uk-nav uk-nav-side">
    <li class="uk-nav-header">Latest News</li>
</ul>
<ul class="uk-nav uk-nav-sub">
    
    <li><a href="http://mapstruct.org/news/2019-12-06-mapstruct-and-quarkus/">MapStruct and Quarkus - a match made in heaven?</a></li>
    
    <li><a href="http://mapstruct.org/news/2019-09-29-mapstruct-1_3_1_Final-bug-fix-released/">MapStruct 1.3.1.Final bug fix released</a></li>
    
    <li><a href="http://mapstruct.org/news/2019-02-11-mapstruct-1_3_0_Final-is-out-in-the-wild/">MapStruct 1.3.0.Final is out in the wild</a></li>
    
    <li><a href="http://mapstruct.org/news/2018-11-12-mapstruct-1_3_0_Beta2-is-out-with-java8-as-baseline/">Java 8 as a baseline, null value property mappings improved builders support and much more: MapStruct 1.3.0.Beta2 is out</a></li>
    
    <li><a href="http://mapstruct.org/news/2018-07-15-mapstruct-1_3_0_Beta1-is-out-with-builder-support/">Support for builders, mapper constructor injection and much more: MapStruct 1.3.0.Beta1 is out</a></li>
    
    <li><a href="http://mapstruct.org/news/2018-03-18-filip-hrisafov-taking-over-as-mapstruct-project-lead/">Filip Hrisafov Taking Over as MapStruct Project Lead</a></li>
    
    <li><a href="http://mapstruct.org/news/2017-10-18-mapstruct-1_2_0_Final-is-out/">MapStruct 1.2.0.Final is out</a></li>
    
</ul>


            </div>
        </div>
        <div class="uk-width-medium-3-4 ms-main">
            
<article class="uk-article">
    <p class="uk-article-meta ms-article-date">
    <time>July 15, 2018</time>
</p>

<h1 class="uk-article-title"><a href="http://mapstruct.org/news/2018-07-15-mapstruct-1_3_0_Beta1-is-out-with-builder-support/">Support for builders, mapper constructor injection and much more: MapStruct 1.3.0.Beta1 is out</a></h1>

<p class="uk-article-meta ms-article-author">
    By <b>Filip Hrisafov</b> under 
    <span class="uk-badge">
    
        release
    </span>
    
    <span class="uk-badge">
    
        news
    </span>
    
</p>

    <div>
        <div><p>It&rsquo; my pleasure to announce the first Beta release of MapStruct 1.3.</p>
<p>The new release comes with a whole lot of new functionality, e.g.:</p>
<ul>
<li>Mapping of (immutable) objects using builders</li>
<li>Constructor injection for Annotation Based component models</li>
<li><code>unmappedSourcePolicy</code> support</li>
<li>Support for defaultExpression</li>
<li>Limit mapping only to explicitly defined mappings</li>
<li>Performance improvement of <code>constant</code> / <code>defaultValue</code> primitive to <code>String</code> mappings</li>
</ul>
<p>Altogether, not less than <a href="https://github.com/mapstruct/mapstruct/issues?q=milestone%3A1.3.0.Beta1">59 issues</a> were fixed for this release.</p>
<p>This would not have been possible without our fantastic community of contributors:
<a href="https://github.com/chris922">Christian Bandowski</a>,
<a href="https://github.com/dvfeinblum">David Feinblum</a>,
<a href="https://github.com/xyzst">Darren Rambaud</a>,
<a href="https://github.com/dastrobu">Daniel Strobusch</a>,
<a href="https://github.com/ericmartineau">Eric Martineau</a>,
<a href="https://github.com/gervaisb">Gervais Blaise</a>,
<a href="https://github.com/smythie86">Jeff Smyth</a>,
<a href="https://github.com/spoerri">Joshua Spoerri</a>,
<a href="https://github.com/kevcodez">Kevin Grüneberg</a>,
<a href="https://github.com/lappleapple">Lauri Apple</a>,
<a href="https://github.com/chigix">Richard Lea</a>,
<a href="https://github.com/sgrekov">Sergey Grekov</a>,
<a href="https://github.com/yokotaso">Tomoya Yokota</a>,
as well as seasoned MapStruct hackers <a href="https://github.com/agudian">Andreas Gudian</a>, <a href="https://github.com/filiphr">Filip Hrisafov</a>, <a href="https://github.com/gunnarmorling">Gunnar Morling</a> and <a href="https://github.com/sjaakd">Sjaak Derksen</a>.</p>
<p>Thanks a lot everyone for all your hard work!</p>
<p>Big thanks to all the users of the 1.3.0-SNAPSHOT dependency of MapStruct.
Without their input we would not have been able to release such a thorough support of the Builder mappings.</p>
<p>Enough of the pep talk, let&rsquo;s take a closer look at some of the new features!</p>
<h3 id="mapping-of-immutable-objects-using-builders"><a class="ms-header-link" href="#mapping-of-immutable-objects-using-builders"><i class="fa fa-link"></i></a>Mapping of (immutable) objects using builders</h3>
<p>Use of builder to <a href="https://github.com/mapstruct/mapstruct/issues/782">map (immutable) objects</a> has been one of the most requested features of MapStruct.</p>
<p>We are happy to announce that as of 1.3.0.Beta1 MapStruct has out of the box support for builders.
Works with:</p>
<ul>
<li><a href="https://projectlombok.org/">Lombok</a> - requires having the Lombok classes in a separate module see <a href="https://github.com/rzwitserloot/lombok/issues/1538">rzwitserloot/lombok#1538</a></li>
<li><a href="https://github.com/google/auto/blob/master/value/userguide/index.md">AutoValue</a></li>
<li><a href="https://immutables.github.io/">Immutables</a></li>
<li><a href="https://github.com/google/FreeBuilder">FreeBuilder</a></li>
<li><a href="https://developers.google.com/protocol-buffers/docs/javatutorial">Protocol Buffer builder</a></li>
<li>It also works for custom builders if the object being build provides a parameterless public static method for instantiating the builder. Otherwise, you would need to write a custom <code>BuilderProvider</code></li>
</ul>
<p>For more details how the Builder support works have a look at the <a href="http://mapstruct.org/documentation/dev/reference/html/#mapping-with-builders">Using builders</a> of the reference guide</p>
<p>We have modified our example project with protobuf support to use the out of the box support for Builders. Have a look at it <a href="https://github.com/mapstruct/mapstruct-examples/tree/master/mapstruct-protobuf3">here</a>.</p>
<h3 id="constructor-injection-for-annotation-based-component-models"><a class="ms-header-link" href="#constructor-injection-for-annotation-based-component-models"><i class="fa fa-link"></i></a>Constructor injection for annotation based component models</h3>
<p>Construction injection for annotation based component models (<code>spring</code>, <code>cdi</code>, <code>jsr330</code>) can bow <a href="https://github.com/mapstruct/mapstruct/issues/571">be used</a>.</p>
<p>Example:</p>
<pre class="prettyprint linenums lang-java">
@Mapper(uses = OrderMapper.class, componentModel = &#34;spring&#34;, injectionStrategy = InjectionStrategy.CONSTRUCTOR)
public interface CustomerMapper {

    CustomerDto mapCustomer(Customer customer);
}
</pre>

<h3 id="support-for-unmapped-properties-in-the-source-type"><a class="ms-header-link" href="#support-for-unmapped-properties-in-the-source-type"><i class="fa fa-link"></i></a>Support for unmapped properties in the source type</h3>
<p>Using <code>Mapper#unmappedSourcePolicy</code> one can now control how unmapped properties of the source type of a mapping should be reported.
For backwards compatibility it is set to <code>ReportingPolicy.IGNORE</code>.</p>
<h3 id="support-for-defaultexpression"><a class="ms-header-link" href="#support-for-defaultexpression"><i class="fa fa-link"></i></a>Support for defaultExpression</h3>
<p><code>Mapping#defaultExpression</code> can now <a href="https://github.com/mapstruct/mapstruct/issues/1363">be used</a> to customize the default value of a mapping.</p>
<pre class="prettyprint linenums lang-java">
@Mapper
public interface CustomerMapper {

    @Mapping(target = &#34;id&#34;, defaultExpression = &#34;java(UUID.randomUUID().toString())&#34;)
    PersonDto map(Person person);
}
</pre>

<h3 id="limit-mapping-only-to-explicitly-defined-mappings"><a class="ms-header-link" href="#limit-mapping-only-to-explicitly-defined-mappings"><i class="fa fa-link"></i></a>Limit mapping only to explicitly defined mappings</h3>
<p>By using <code>@BeanMapping(ignoreByDefault = true)</code> one can limit the mapping only to the explicitly defined mappings.
This annotation actually applies ignore to all target properties, which means that it can be used in configuration mappings to only map explicit properties in base classes.</p>
<h3 id="performance-improvement-of-constant--defaultvalue-primitive-to-string-mappings"><a class="ms-header-link" href="#performance-improvement-of-constant--defaultvalue-primitive-to-string-mappings"><i class="fa fa-link"></i></a>Performance improvement of constant / defaultValue primitive to String mappings</h3>
<p>With <a href="https://github.com/mapstruct/mapstruct/issues/1401">#1401</a> we now try to check if it is possible to assign a <code>defaultValue</code> and / or a <code>constant</code> directly without doing a conversion.
For example for the following mapper:</p>
<pre class="prettyprint linenums lang-java">
@Mapper
public interface PersonMapper {

    @Mapping(target = &#34;price&#34;, constant = &#34;10.5&#34;)
    @Mapping(target = &#34;age&#34;, defaultValue = &#34;10)
    Order order(OrderDto source);   
}
</pre>

<p>Before the following was generated:</p>
<pre class="prettyprint linenums lang-java">
public class PersonMapperImpl implements PersonMapper {

    @Override
    public Order order(OrderDto source) {
        if (source == null) {
            return null;
        }

        Order order = new Order();
        order.setConstant(Double.parseDouble(&#34;10.5&#34;));
        if (source.getAge() == null) {
            order.setAge(Integer.parse(&#34;10&#34;));
        } else {
            order.setAge(source.getAge());
        }
        return order;
    } 
}
</pre>

<p>And now the following is generated:</p>
<pre class="prettyprint linenums lang-java">
public class PersonMapperImpl implements PersonMapper {

    @Override
    public Order order(OrderDto source) {
        if (source == null) {
            return null;
        }

        Order order = new Order();
        order.setConstant(10.5));
        if (source.getAge() == null) {
            order.setAge(10);
        } else {
            order.setAge(source.getAge());
        }
        return order;
    } 
}
</pre>

<h3 id="enhancements"><a class="ms-header-link" href="#enhancements"><i class="fa fa-link"></i></a>Enhancements</h3>
<ul>
<li>Package private mappers with the default component model</li>
<li>Improve performance of <code>mapstruct-processor</code> on Java 9</li>
<li>Support for using <code>@ObjectFactory</code> on objects passed with <code>@Context</code></li>
<li>Implicit converstion between <code>String</code> and <code>java.util.Currency</code></li>
<li>Improved error messages and locations</li>
</ul>
<h3 id="download"><a class="ms-header-link" href="#download"><i class="fa fa-link"></i></a>Download</h3>
<p>This concludes our tour through MapStruct 1.3 Beta1.
If you&rsquo;d like to try out the features described above, you can fetch the new release from Maven Central using the following GAV coordinates:</p>
<ul>
<li>Annotation JAR: <a href="http://search.maven.org/#artifactdetails%7Corg.mapstruct%7Cmapstruct-jdk8%7C1.3.0.Beta1%7Cjar">org.mapstruct:mapstruct-jdk8:1.3.0.Beta1</a> (for usage with Java &gt;= 8)
or <a href="http://search.maven.org/#artifactdetails%7Corg.mapstruct%7Cmapstruct%7C1.3.0.Beta1%7Cjar">org.mapstruct:mapstruct:1.3.0.Beta1</a> (for earlier Java versions)</li>
<li>Annotation processor JAR: <a href="http://search.maven.org/#artifactdetails%7Corg.mapstruct%7Cmapstruct-processor%7C1.3.0.Beta1%7Cjar">org.mapstruct:mapstruct-processor:1.3.0.Beta1</a></li>
</ul>
<p>Alternatively, you can get ZIP and TAR.GZ distribution bundles - containing all the JARs, documentation etc. - <a href="https://github.com/mapstruct/mapstruct/releases/tag/1.3.0.Beta1">from GitHub</a>.</p>
<p>If you run into any trouble or would like to report a bug, feature request or similar, use the following channels to get in touch:</p>
<ul>
<li>Get help at the <a href="https://groups.google.com/forum/?fromgroups#!forum/mapstruct-users">mapstruct-users</a> group or in our <a href="https://gitter.im/mapstruct/mapstruct-users">Gitter room</a></li>
<li>Report bugs and feature requests via the <a href="https://github.com/mapstruct/mapstruct/issues">issue tracker</a></li>
<li>Follow <a href="https://twitter.com/GetMapStruct">@GetMapStruct</a> on Twitter</li>
<li>Follow MapStruct on <a href="https://plus.google.com/u/0/118070742567787866481/posts">Google+</a></li>
</ul></div>
    </div>
    <div>
        <ul class="uk-pagination">
            
            <li>
                <a href="/news/2018-11-12-mapstruct-1_3_0_Beta2-is-out-with-java8-as-baseline/" title="Java 8 as a baseline, null value property mappings improved builders support and much more: MapStruct 1.3.0.Beta2 is out"><i class="uk-icon-angle-double-left"></i></a>
            </li>
            
            
            <li>
                <a href="/news/2018-03-18-filip-hrisafov-taking-over-as-mapstruct-project-lead/" title="Filip Hrisafov Taking Over as MapStruct Project Lead"><i class="uk-icon-angle-double-right"></i></a>
            </li>
            

        </ul>
    </div>

    <div>
        <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'mapstruct';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>
</article>

        </div>
    </div>
</div>

        <div class="ms-footer">
            <div class="uk-container uk-container-center uk-vertical-align uk-height-1-1">
                <div class="uk-vertical-align-middle uk-width-1-1">
                    <div class="uk-grid-small" >
                        <div class="uk-width-1-1 ">
                            <ul class="uk-subnav uk-subnav-line uk-flex-center ms-subnav-footer">
                                <li><a class="ms-link-footer" href="/documentation/installation">Documentation</a></li>
                                <li><a class="ms-link-footer" href="https://github.com/mapstruct/mapstruct">Source Code</a></li>
                                <li><a class="ms-link-footer" href="https://groups.google.com/forum/#!forum/mapstruct-users">Google Group</a></li>
                                <li><a class="ms-link-footer" href="https://gitter.im/mapstruct/mapstruct-users">Gitter</a></li>
                                <li><a class="ms-link-footer" href="http://stackoverflow.com/questions/tagged/mapstruct">StackOverflow</a></li>
                                <li><a class="ms-link-footer" href="https://twitter.com/GetMapStruct">Twitter</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="uk-grid">
                        <div class="uk-width-1-1 ms-subnav-footer">
                            © The MapStruct authors 2019
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
           prettyPrint();
        </script>
    </body>
</html>

